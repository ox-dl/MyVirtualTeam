<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <!--  Global Colors  -->

  <Color x:Key="MainColor">#2E7558</Color>
  <Color x:Key="MainColorAlt">#4ABC8D</Color>
  <Color x:Key="Gray-100">#646464</Color>

  <!--  Variables  -->

  <Thickness x:Key="BorderSlim">1</Thickness>
  <Thickness x:Key="BorderBold">2</Thickness>
  <CornerRadius x:Key="LittleRadius">4</CornerRadius>
  <CornerRadius x:Key="MediumRadius">5</CornerRadius>

  <!--  Brushes  -->

  <SolidColorBrush x:Key="Static.Background" Color="{StaticResource Bckg}" />
  <SolidColorBrush x:Key="Static.Menu" Color="{StaticResource BckgAlt}" />
  <SolidColorBrush x:Key="Static.Gray" Color="{StaticResource Gray-100}" />
  <SolidColorBrush x:Key="Static.Border" Color="{StaticResource Border}" />
  <SolidColorBrush x:Key="Static.Text" Color="{StaticResource Text}" />
  <SolidColorBrush x:Key="Static.MainColor" Color="{StaticResource MainColor}" />
  <SolidColorBrush x:Key="Highlight.MainColor" Color="{StaticResource MainColorAlt}" />

  <!--  Arrows Shapes  -->

  <Geometry x:Key="Arrow.Down">M 0,0 L 3.5,4 L 7,0 Z</Geometry>
  <Geometry x:Key="Arrow.Up">M 0,4 L 3.5,0 L 7,4 Z</Geometry>
  <Geometry x:Key="Arrow.Right">M 0,0 L 4,3.5 L 0,7 Z</Geometry>

  <!--  Global  -->

  <Style TargetType="{x:Type TextBlock}">
    <Setter Property="FontFamily" Value="pack://application:,,,/Assets/Fonts/#Sen Regular" />
    <Setter Property="FontSize" Value="14" />
  </Style>

  <Style TargetType="{x:Type Button}">
    <Setter Property="FontFamily" Value="pack://application:,,,/Assets/Fonts/#Sen Regular" />
    <Setter Property="Foreground" Value="{StaticResource Static.Background}" />
    <Setter Property="Background" Value="{StaticResource Static.MainColor}" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Button}">
          <Border Background="{TemplateBinding Background}" CornerRadius="5">
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Background" Value="{StaticResource Highlight.MainColor}" />
      </Trigger>
    </Style.Triggers>
  </Style>

  <!--  Header  -->

  <Style x:Key="TopMenu" TargetType="{x:Type Menu}">
    <Setter Property="Padding" Value="3" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Foreground" Value="{StaticResource Static.Text}" />
  </Style>

  <ControlTemplate x:Key="TopMenuItem" TargetType="{x:Type MenuItem}">
    <Border
      x:Name="templateRoot"
      Padding="4,2"
      Background="{TemplateBinding Background}"
      BorderBrush="{TemplateBinding BorderBrush}"
      BorderThickness="{TemplateBinding BorderThickness}"
      CornerRadius="4"
      SnapsToDevicePixels="true">
      <Grid>
        <ContentPresenter
          Margin="{TemplateBinding Padding}"
          ContentSource="Header"
          RecognizesAccessKey="True"
          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        <Rectangle
          x:Name="PopupPositionRef"
          HorizontalAlignment="Left"
          VerticalAlignment="Bottom" />
        <Popup
          x:Name="PART_Popup"
          AllowsTransparency="True"
          Focusable="False"
          HorizontalOffset="-4"
          IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
          Placement="Left"
          PlacementTarget="{Binding ElementName=PopupPositionRef}"
          VerticalOffset="5">
          <Border
            x:Name="SubMenuBorder"
            Padding="2"
            Background="{StaticResource Static.Background}"
            BorderBrush="{StaticResource Static.Border}"
            BorderThickness="1"
            CornerRadius="4"
            SnapsToDevicePixels="True">
            <ItemsPresenter
              x:Name="ItemsPresenter"
              Grid.IsSharedSizeScope="true"
              KeyboardNavigation.DirectionalNavigation="Cycle"
              KeyboardNavigation.TabNavigation="Cycle"
              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
          </Border>
        </Popup>
      </Grid>
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="IsHighlighted" Value="True">
        <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource Static.MainColor}" />
        <Setter TargetName="templateRoot" Property="BorderBrush" Value="Transparent" />
        <Setter TargetName="templateRoot" Property="TextElement.Foreground" Value="{StaticResource Static.Background}" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

  <ControlTemplate x:Key="TopSubMenuItem" TargetType="{x:Type MenuItem}">
    <Border
      x:Name="templateRoot"
      Height="25"
      Background="{TemplateBinding Background}"
      BorderBrush="{TemplateBinding BorderBrush}"
      BorderThickness="{TemplateBinding BorderThickness}"
      CornerRadius="4"
      SnapsToDevicePixels="true">
      <ContentPresenter
        x:Name="menuHeaderContainer"
        MinWidth="200"
        Margin="6,0"
        HorizontalAlignment="Left"
        VerticalAlignment="Center"
        ContentSource="Header"
        RecognizesAccessKey="True"
        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="IsHighlighted" Value="True">
        <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource Static.MainColor}" />
        <Setter TargetName="templateRoot" Property="BorderBrush" Value="Transparent" />
        <Setter TargetName="templateRoot" Property="TextElement.Foreground" Value="{StaticResource Static.Background}" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

  <ControlTemplate x:Key="TopSubMenuPopup" TargetType="{x:Type MenuItem}">
    <Border
      x:Name="templateRoot"
      Height="25"
      Background="{TemplateBinding Background}"
      BorderBrush="{TemplateBinding BorderBrush}"
      BorderThickness="{TemplateBinding BorderThickness}"
      CornerRadius="4"
      SnapsToDevicePixels="true">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <ContentPresenter
          Grid.Column="0"
          Margin="6,0,0,0"
          HorizontalAlignment="Left"
          VerticalAlignment="Center"
          ContentSource="Header"
          RecognizesAccessKey="True"
          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        <Path
          x:Name="RightArrow"
          Grid.Column="1"
          Margin="0,0,6,0"
          HorizontalAlignment="Right"
          VerticalAlignment="Center"
          Data="{StaticResource Arrow.Right}"
          Fill="{StaticResource Static.Text}" />
        <Popup
          x:Name="PART_Popup"
          AllowsTransparency="true"
          Focusable="false"
          HorizontalOffset="10"
          IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource Mode=TemplatedParent}}"
          Placement="Left"
          VerticalOffset="-3">
          <Border
            x:Name="SubMenuBorder"
            Padding="2"
            Background="{StaticResource Static.Background}"
            BorderBrush="{StaticResource Static.Border}"
            BorderThickness="1"
            CornerRadius="4"
            SnapsToDevicePixels="true">
            <ScrollViewer x:Name="SubMenuScrollViewer" Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">
              <Grid RenderOptions.ClearTypeHint="Enabled">
                <Canvas
                  Width="0"
                  Height="0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top">
                  <Rectangle
                    x:Name="OpaqueRect"
                    Width="{Binding ActualWidth, ElementName=SubMenuBorder}"
                    Height="{Binding ActualHeight, ElementName=SubMenuBorder}"
                    Fill="{Binding Background, ElementName=SubMenuBorder}" />
                </Canvas>
                <ItemsPresenter
                  x:Name="ItemsPresenter"
                  Grid.IsSharedSizeScope="true"
                  KeyboardNavigation.DirectionalNavigation="Cycle"
                  KeyboardNavigation.TabNavigation="Cycle"
                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
              </Grid>
            </ScrollViewer>
          </Border>
        </Popup>
      </Grid>
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="IsHighlighted" Value="True">
        <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource Static.MainColor}" />
        <Setter TargetName="templateRoot" Property="BorderBrush" Value="Transparent" />
        <Setter TargetName="templateRoot" Property="TextElement.Foreground" Value="{StaticResource Static.Background}" />
        <Setter TargetName="RightArrow" Property="Fill" Value="{StaticResource Static.Background}" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

  <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
    <Setter Property="HorizontalAlignment" Value="Center" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Separator}">
          <Border Width="0" Height="8" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!--  Footer  -->

  <Style x:Key="BottomMenu" TargetType="{x:Type Menu}">
    <Setter Property="Margin" Value="6,0,0,0" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Foreground" Value="{StaticResource Static.Text}" />
    <Setter Property="VerticalAlignment" Value="Center" />
  </Style>

  <ControlTemplate x:Key="BottomMenuItem" TargetType="{x:Type MenuItem}">
    <Border
      x:Name="templateRoot"
      Padding="5"
      Background="{TemplateBinding Background}"
      BorderBrush="{StaticResource Static.Gray}"
      BorderThickness="{StaticResource BorderSlim}"
      CornerRadius="4"
      SnapsToDevicePixels="true">
      <StackPanel Orientation="Horizontal">
        <Rectangle
          x:Name="PopupPositionRef"
          HorizontalAlignment="Left"
          VerticalAlignment="Top" />
        <ContentPresenter
          Margin="{TemplateBinding Padding}"
          ContentSource="Header"
          RecognizesAccessKey="True"
          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        <Path
          x:Name="Arrow"
          Margin="5,0"
          HorizontalAlignment="Right"
          VerticalAlignment="Center"
          Data="{StaticResource Arrow.Down}"
          Fill="{StaticResource Static.Gray}" />
        <Popup
          x:Name="PART_Popup"
          AllowsTransparency="True"
          Focusable="False"
          HorizontalOffset="-5"
          IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
          Placement="Left"
          PlacementTarget="{Binding ElementName=PopupPositionRef}"
          VerticalOffset="-59">
          <Border
            x:Name="SubMenuBorder"
            Padding="2"
            Background="{StaticResource Static.Background}"
            BorderBrush="{StaticResource Static.Border}"
            BorderThickness="1"
            CornerRadius="4"
            SnapsToDevicePixels="True">
            <ItemsPresenter
              x:Name="ItemsPresenter"
              Grid.IsSharedSizeScope="true"
              KeyboardNavigation.DirectionalNavigation="Cycle"
              KeyboardNavigation.TabNavigation="Cycle"
              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
          </Border>
        </Popup>
      </StackPanel>
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="IsHighlighted" Value="True">
        <Setter TargetName="templateRoot" Property="Background" Value="{StaticResource Static.MainColor}" />
        <Setter TargetName="templateRoot" Property="BorderBrush" Value="Transparent" />
        <Setter TargetName="templateRoot" Property="TextElement.Foreground" Value="{StaticResource Static.Background}" />
        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource Static.Background}" />
        <Setter Property="Cursor" Value="Hand" />
      </Trigger>
      <Trigger Property="IsSubmenuOpen" Value="True">
        <Setter TargetName="Arrow" Property="Data" Value="{StaticResource Arrow.Up}" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

</ResourceDictionary>
